german_ships=[
  {'vessel':{'name':'WBS 5 Adolf Vinnen'},
  'coordinates':[62.20,3.41]},
  {'vessel':{'name':'WBS 6 Kehdingen'},
  'coordinates':[76.30,-19.02]},
  {'vessel':{'name':'Sachsenwald'},
  'coordinates':[46.49,-1.80]},
  {'vessel':{'name':'Lauenburg'},
  'coordinates':[71.00,-8.20]},
  {'vessel':{'name':'WBS 4 Hinrich Freese'},
  'coordinates':[71.03,-9.29]}
]

var gship_routes=[
  {
    //Adolf Vinnen
    coordinates:[[62.20,3.41],[60.39,5.32]],
    color: 'yellow'
  },
  {
    //Kehdingen
    coordinates:[[76.30,-19.02],[58.16,8.02]],
    color: 'yellow'
  },
  {
    //Sachsenwald
    coordinates:[[46.49,-1.80],[45.56,-3.16]],
    color: 'yellow'
  },
  {
    //Lauenburg
    coordinates:[[71.00,-8.20],[82.20,10.41]],
    color: 'yellow'
  },
  {
    //Hinrich Freese
    coordinates:[[71.03,-9.29],[64.43,10.40]],
    color: 'yellow'
  }
]

nazi_stat=[
  {'station':{'name':'Schatzgrabber'},
  'coordinates':[80.67,46.81]},
  {'station':{'name':'Knut'},
  'coordinates':[58.55,-62.94]}
]

stat_data=[{'city': {'name': 'AIN EL'},
'coordinates': [36.383333329999999, 6.6500000000000004]},
{'city': {'name': 'LA SENIA'},
'coordinates': [35.616666670000001, 0.58333333300000001]},
{'city': {'name': 'MAISON BLANCHE'},
'coordinates': [36.716666670000002, 3.2166666669999997]},
{'city': {'name': 'TELERGMA'},
'coordinates': [36.116666670000001, 6.4166666670000003]},
{'city': {'name': 'TINDOUF'},
'coordinates': [27.68333333, -8.0833333329999988]},
{'city': {'name': 'ST JOHNS/COOLIDGE FIELD'},
'coordinates': [17.116666670000001, -61.733333330000001]},
{'city': {'name': 'AMBERLY'},
'coordinates': [-27.600000000000001, 152.81666669999998]},
{'city': {'name': 'ARCHER'}, 'coordinates': [-27.583333329999999, 153.0]},
{'city': {'name': 'BRISBANE'}, 'coordinates': [-27.43333333, 153.1333333]},
{'city': {'name': 'CHARLEVILLE'},
'coordinates': [-26.416666670000001, 146.21666669999999]},
{'city': {'name': 'CLONCURRY'},
'coordinates': [-20.68333333, 140.58333330000002]},
{'city': {'name': 'HORN ISLAND'}, 'coordinates': [-10.6, 142.16666669999998]},
{'city': {'name': 'LONGREACH'},
'coordinates': [-23.449999999999999, 144.06666669999998]},
{'city': {'name': 'MACKAY'},
'coordinates': [-21.166666670000001, 149.30000000000001]},
{'city': {'name': 'ROCKHAMPTON'},
'coordinates': [-23.399999999999999, 150.53333330000001]},
{'city': {'name': 'LAJES'},
'coordinates': [38.766666669999999, -27.033333330000001]},
{'city': {'name': 'GREAT EXUMA ISLAND'},
'coordinates': [23.516666669999999, -75.733333329999994]},
{'city': {'name': 'BERMUDA'},
'coordinates': [32.366666670000001, -64.666666669999998]},
{'city': {'name': 'BAHREIN ISLAND'},
'coordinates': [26.266666669999999, 50.566666669999996]},
{'city': {'name': 'CHRISTS CHURCH'},
'coordinates': [13.06666667, -59.583333330000002]},
{'city': {'name': 'CLEVELANDIA'},
'coordinates': [3.8666666670000001, -51.75]},
{'city': {'name': 'FERNANDO DE NORONHA'},
'coordinates': [-3.8333333330000001, -32.483333330000001]},
{'city': {'name': 'FORTALEZA'},
'coordinates': [-3.766666667, -38.616666670000001]},
{'city': {'name': 'PARNAMIRIM'},
'coordinates': [-5.9000000000000004, -35.299999999999997]},
{'city': {'name': 'RECIFE'},
'coordinates': [-8.1166666670000005, -34.883333329999999]},
{'city': {'name': 'SAO LUIZ'},
'coordinates': [-2.5833333330000001, -44.233333330000001]},
{'city': {'name': 'VAL DE CANS'},
'coordinates': [-1.3833333330000002, -48.366666670000001]},
{'city': {'name': 'PARRITA'},
'coordinates': [9.5166666670000009, -84.450000000000003]},
{'city': {'name': 'SAN JOSE'}, 'coordinates': [9.9000000000000004, -84.0]},
{'city': {'name': 'CANTON ISLAND'}, 'coordinates': [-2.766666667, -171.75]},
{'city': {'name': 'CAMAGUEY'},
'coordinates': [21.399999999999999, -77.866666670000001]},
{'city': {'name': 'SAN ANTONIO'},
'coordinates': [22.883333329999999, -82.633333329999999]},
{'city': {'name': 'CIUDAD TRUJILLO'},
'coordinates': [18.483333330000001, -69.883333329999999]},
{'city': {'name': 'SHEIKH OTHMAN'},
'coordinates': [12.866666670000001, 44.866666670000001]},
{'city': {'name': 'LUXOR'},
'coordinates': [25.699999999999999, 32.666666669999998]},
{'city': {'name': 'MERSA MATRUH'},
'coordinates': [31.449999999999999, 27.25]},
{'city': {'name': 'PAYNE'},
'coordinates': [30.133333329999999, 31.350000000000001]},
{'city': {'name': 'SALINAS'},
'coordinates': [-2.2000000000000002, -81.083333330000002]},
{'city': {'name': 'SHARJAH'},
'coordinates': [25.350000000000001, 55.450000000000003]},
{'city': {'name': 'ERITREA'},
'coordinates': [15.28333333, 38.899999999999999]},
{'city': {'name': 'NANDI/AAF'}, 'coordinates': [-17.75, 177.3666667]},
{'city': {'name': 'BASTIA/CORSICA'},
'coordinates': [42.549999999999997, 9.4333333330000002]},
{'city': {'name': 'BASTIA/CORSICA'},
'coordinates': [42.700000000000003, 9.3666666670000005]},
{'city': {'name': 'C DELORO/CORSICA'},
'coordinates': [41.916666669999998, 8.75]},
{'city': {'name': 'MARSEILLE'},
'coordinates': [43.433333330000004, 5.266666667]},
{'city': {'name': 'MIGLIACCIARO/CORSICA'},
'coordinates': [42.0, 9.4499999999999993]},
{'city': {'name': 'PARIS/ORLY'},
'coordinates': [48.733333330000001, 2.3666666670000001]},
{'city': {'name': 'PORTETTA/CORSICA'},
'coordinates': [42.566666669999996, 9.3333333329999988]},
{'city': {'name': 'ACCRA'},
'coordinates': [5.5999999999999996, -0.29999999999999999]},
{'city': {'name': 'NARSARSSUAK'},
'coordinates': [61.183333330000004, -45.366666670000001]},
{'city': {'name': 'SIMIUTAK'},
'coordinates': [60.683333330000004, -46.633333329999999]},
{'city': {'name': 'SONDRESTROM'},
'coordinates': [67.016666670000006, -50.700000000000003]},
{'city': {'name': 'ATHENS'},
'coordinates': [37.966666670000002, 23.783333330000001]},
{'city': {'name': 'GUATEMALA CITY'},
'coordinates': [14.58333333, -90.549999999999997]},
{'city': {'name': 'SAN JOSE'},
'coordinates': [13.91666667, -90.833333330000002]},
{'city': {'name': 'GEORGETOWN'}, 'coordinates': [6.5, -58.216666670000002]},
{'city': {'name': 'PORT AU PRINCE'},
'coordinates': [18.550000000000001, -72.349999999999994]},
{'city': {'name': 'BURNS FIELD/AAF'},
'coordinates': [21.899999999999999, -159.56666669999998]},
{'city': {'name': 'HICKAM/AFB'},
'coordinates': [21.333333329999999, -157.90000000000001]},
{'city': {'name': 'LYMAN FIELD/AAF'},
'coordinates': [19.716666669999999, -155.06666669999998]},
{'city': {'name': 'MOKULEIA FIELD/AAF'},
'coordinates': [21.583333329999999, -158.21666669999999]},
{'city': {'name': 'MOLOKAI/AP 524'},
'coordinates': [21.149999999999999, -157.03333330000001]},
{'city': {'name': 'WHEELER/AFB 810.1'},
'coordinates': [21.483333330000001, -158.05000000000001]},
{'city': {'name': 'CAMP DELTA'},
'coordinates': [65.666666669999998, -18.033333330000001]},
{'city': {'name': 'KEFLAVIK'},
'coordinates': [63.966666670000002, -22.616666670000001]},
{'city': {'name': 'REYKJAVIK'},
'coordinates': [64.133333329999999, -21.916666670000001]},
{'city': {'name': 'AGRA'},
'coordinates': [27.166666670000001, 78.099999999999994]},
{'city': {'name': 'BAMRAULI'},
'coordinates': [25.43333333, 81.833333330000002]},
{'city': {'name': 'BANGALORE'},
'coordinates': [12.949999999999999, 77.583333330000002]},
{'city': {'name': 'BARRACKPORE'},
'coordinates': [22.766666669999999, 88.366666670000001]},
{'city': {'name': 'BINDUKURI'},
'coordinates': [26.716666669999999, 92.716666669999995]},
{'city': {'name': 'CHAKULIA'},
'coordinates': [22.449999999999999, 86.716666669999995]},
{'city': {'name': 'GAYA'}, 'coordinates': [24.75, 84.966666669999995]},
{'city': {'name': 'JODHPUR'},
'coordinates': [26.266666669999999, 73.133333329999999]},
{'city': {'name': 'JORHAT'},
'coordinates': [26.716666669999999, 94.166666669999998]},
{'city': {'name': 'KALAIKUNDA'},
'coordinates': [22.333333329999999, 87.233333329999994]},
{'city': {'name': 'MOHANBERI'},
'coordinates': [27.483333330000001, 95.116666670000001]},
{'city': {'name': 'HABBANIYA'},
'coordinates': [33.366666670000001, 43.649999999999999]},
{'city': {'name': 'RUTBA'},
'coordinates': [32.933333330000004, 39.766666669999999]},
{'city': {'name': 'ABADAN'}, 'coordinates': [30.366666670000001, 48.25]},
{'city': {'name': 'AMIRABAD POST'},
'coordinates': [35.716666670000002, 51.483333330000001]},
{'city': {'name': 'CAMP PARKS'},
'coordinates': [34.850000000000001, 48.600000000000001]},
{'city': {'name': 'AMENDOLA'},
'coordinates': [41.549999999999997, 15.733333330000001]},
{'city': {'name': 'AMENDOLA/MU 9'},
'coordinates': [41.716666670000002, 15.46666667]},
{'city': {'name': 'BARI'}, 'coordinates': [41.133333329999999, 16.81666667]},
{'city': {'name': 'CAGLIARI/SARDINIA'},
'coordinates': [39.25, 9.1166666670000005]},
{'city': {'name': 'CIAMPINO'},
'coordinates': [41.799999999999997, 12.516666669999999]},
{'city': {'name': 'DECIMOMANNO'}, 'coordinates': [39.299999999999997, 9.25]},
{'city': {'name': 'FLORENCE/MU 1+4+10'},
'coordinates': [43.766666669999999, 11.199999999999999]},
{'city': {'name': 'FOGGIA'},
'coordinates': [41.433333330000004, 15.616666670000001]},
{'city': {'name': 'FOGGIA/MU 18'},
'coordinates': [41.450000000000003, 15.65]},
{'city': {'name': 'FONTANA'},
'coordinates': [37.450000000000003, 15.016666669999999]},
{'city': {'name': 'LECCE/MU 2'},
'coordinates': [40.233333330000001, 18.083333329999999]},
{'city': {'name': 'NAPLES'},
'coordinates': [40.899999999999999, 14.18333333]},
{'city': {'name': 'PALERMO/MU 10'},
'coordinates': [38.116666670000001, 13.366666670000001]},
{'city': {'name': 'PISA'},
'coordinates': [43.683333330000004, 10.449999999999999]},
{'city': {'name': 'KINGSTON'},
'coordinates': [17.899999999999999, -77.183333329999996]},
{'city': {'name': 'CHITOSE HOKKAIDO'},
'coordinates': [42.799999999999997, 141.55000000000001]},
{'city': {'name': 'KADENA/AB'},
'coordinates': [26.350000000000001, 127.81666670000001]},
{'city': {'name': 'KANOYA'},
'coordinates': [31.366666670000001, 130.91666670000001]},
{'city': {'name': 'OKINAWA/RYUKYU ISLANDS'},
'coordinates': [26.199999999999999, 127.56666670000001]},
{'city': {'name': 'OSAKA'}, 'coordinates': [34.799999999999997, 135.3666667]},
{'city': {'name': 'TACHIKAWA'},
'coordinates': [35.700000000000003, 139.41666669999998]},
{'city': {'name': 'SEOUL/ROK K-14'},
'coordinates': [37.549999999999997, 126.7]},
{'city': {'name': 'AMURI/FIELD AAF'},
'coordinates': [-18.833333329999999, -159.78333330000001]},
{'city': {'name': 'ST LUCIA/ISLAND'},
'coordinates': [13.733333330000001, -60.850000000000001]},
{'city': {'name': 'CAPE PALMAS'},
'coordinates': [4.3666666669999996, -7.7333333329999991]},
{'city': {'name': 'FISHERMANS LAKE'},
'coordinates': [6.75, -11.266666669999999]},
{'city': {'name': 'MARSHALL/ROBERTS FIELD'},
'coordinates': [6.2333333329999991, -10.43333333]},
{'city': {'name': 'WHEELUS'},
'coordinates': [32.899999999999999, 13.21666667]},
{'city': {'name': 'CASABLANCA/CAZES FIELD'},
'coordinates': [33.583333330000002, -7.5]},
{'city': {'name': 'MARRAKECH'},
'coordinates': [31.649999999999999, -8.1500000000000004]},
{'city': {'name': 'OUJDA'}, 'coordinates': [34.75, -1.8999999999999999]},
{'city': {'name': 'TOUAHAR'}, 'coordinates': [34.200000000000003, -4.25]},
{'city': {'name': 'ATAR'}, 'coordinates': [20.466666669999999, -13.03333333]},
{'city': {'name': 'BOUGAINVILLE/AAF'},
'coordinates': [-6.2333333329999991, 155.1333333]},
{'city': {'name': 'FINSCHHAFEN/AAF'},
'coordinates': [-6.6166666670000005, 147.84999999999999]},
{'city': {'name': 'JACKSON'},
'coordinates': [-9.4499999999999993, 147.21666669999999]},
{'city': {'name': 'LAE/AAF'}, 'coordinates': [-6.75, 146.93333330000002]},
{'city': {'name': 'ESPIRITU SANTO/AAF'}, 'coordinates': [-15.5, 167.2666667]},
{'city': {'name': 'APAPA'},
'coordinates': [6.4500000000000002, 3.4333333330000002]},
{'city': {'name': 'KANO'}, 'coordinates': [12.050000000000001, 8.5]},
{'city': {'name': 'MAIDUGURI'}, 'coordinates': [11.85, 13.133333329999999]},
{'city': {'name': 'MERCEDES'},
'coordinates': [12.133333329999999, -86.233333329999994]},
{'city': {'name': 'WILLEMSTAD'},
'coordinates': [12.18333333, -68.966666669999995]},
{'city': {'name': 'CHRISTMAS ISLAND/AAF'},
'coordinates': [1.983333333, -157.41666669999998]},
{'city': {'name': 'MASIRAH ISLAND'},
'coordinates': [20.649999999999999, 58.833333330000002]},
{'city': {'name': 'SALALAH'},
'coordinates': [17.050000000000001, 54.066666669999996]},
{'city': {'name': 'BORA BORA/AAF'},
'coordinates': [-16.449999999999999, -151.7333333]},
{'city': {'name': 'CLARK'}, 'coordinates': [15.18333333, 120.5]},
{'city': {'name': 'MANILA/AAF'}, 'coordinates': [14.5, 121.06666670000001]},
{'city': {'name': 'IWO JIMA/AB'},
'coordinates': [24.783333330000001, 141.2666667]},
{'city': {'name': 'KWAJALEIN/AFB'},
'coordinates': [8.7166666670000001, 167.78333330000001]},
{'city': {'name': 'PALMYRA ISLAND/LINE ISLANDS'},
'coordinates': [5.8833333329999995, -162.05000000000001]},
{'city': {'name': 'BHOLARI'},
'coordinates': [25.31666667, 68.183333329999996]},
{'city': {'name': 'JIWANI'},
'coordinates': [25.06666667, 61.799999999999997]},
{'city': {'name': 'KARACHI'}, 'coordinates': [24.899999999999999, 67.25]},
{'city': {'name': 'BALBOA/ALBROOK'},
'coordinates': [8.9666666670000001, -79.5]},
{'city': {'name': 'DAVID'},
'coordinates': [8.3833333329999995, -82.333333330000002]},
{'city': {'name': 'FORT KOBBE'},
'coordinates': [8.9166666670000012, -79.633333329999999]},
{'city': {'name': 'HOWARD'},
'coordinates': [8.9166666670000012, -79.650000000000006]},
{'city': {'name': 'JAQUE'}, 'coordinates': [7.5, -78.016666670000006]},
{'city': {'name': 'POCRI'}, 'coordinates': [7.7333333329999991, -80.0]},
{'city': {'name': 'REY ISLAND'},
'coordinates': [8.2333333329999991, -78.083333330000002]},
{'city': {'name': 'RIO HATO'}, 'coordinates': [8.3666666670000005, -80.0]},
{'city': {'name': 'KUUJJAUQ/AIRPORT'},
'coordinates': [58.100000000000001, -68.033333330000005]},
{'city': {'name': 'MINGAN'},
'coordinates': [50.283333329999998, -64.016666670000006]},
{'city': {'name': 'TALARA'},
'coordinates': [-4.5333333329999999, -81.016666670000006]},
{'city': {'name': 'DAKAR/EKNES FIELD'},
'coordinates': [14.71666667, -17.016666669999999]},
{'city': {'name': 'DAKAR/MALLARD FIELD'},
'coordinates': [14.75, -17.050000000000001]},
{'city': {'name': 'BANIKA/AAF'},
'coordinates': [-9.0666666669999998, 159.0166667]},
{'city': {'name': 'MUNDA/AAF'},
'coordinates': [-8.3333333329999988, 157.0166667]},
{'city': {'name': 'ISTRES'}, 'coordinates': [43.5, 4.0833333329999997]},
{'city': {'name': 'WALLER/BWI'},
'coordinates': [10.616666670000001, -61.016666669999999]},
{'city': {'name': 'SOUTH CAICOS ISLAND'},
'coordinates': [21.483333330000001, -71.049999999999997]},
{'city': {'name': 'TONGATABU ISLAND'}, 'coordinates': [-21.25, -175.0]},
{'city': {'name': 'EL AQUINA'},
'coordinates': [36.850000000000001, 10.016666669999999]},
{'city': {'name': 'EL DJEM'},
'coordinates': [35.333333330000002, 10.06666667]},
{'city': {'name': 'SISI AHMED'},
'coordinates': [37.200000000000003, 9.0833333329999988]},
{'city': {'name': 'ADANA'},
'coordinates': [36.983333330000001, 35.016666669999999]},
{'city': {'name': 'WARRINGTON'},
'coordinates': [53.383333329999999, -2.0499999999999998]}]

// function loadJSON(callback) {
//   var xobj = new XMLHttpRequest();
//   xobj.overrideMimeType("application/json");
//   xobj.open('GET','stat.json',true);
//   xobj.onreadystatechange = function() {
//     if (xobj.readyState == 4 && xobj.status == '200') {
//       callback(xobj.responseText);
//     }
//   }
// }

// loadJSON(function(response) {
//   jsonresponse=JSON.parse(response);
//   console.log(jsonresponse[0].name)
// })

// // console.log('stat.json');  
// // console.log(JSON.parse('stat.json'));

// // d3.json('stat.json', function(err,stations) {
// //   console.log(err);
// //   console.log(stations);
// // }
// // )
 
  
var markerSize=100000;

var locations = stat_data;

var cityMarkers = [];
var gshipMarkers = [];
var gshipLines=[]
var naziMarkers=[]

// Loop through data
for (var i = 0; i < locations.length; i++) {
  cityMarkers.push(
    L.circle(locations[i].coordinates, {
      stroke: false,
      fillOpacity: 0.5,
      color: "red",
      fillColor: "red",
      radius: markerSize
    }).bindPopup(stat_data[i].city.name)
  );
}

for (var i =0; i < german_ships.length; i++){
  gshipMarkers.push(
    L.circle(german_ships[i].coordinates, {
      stroke: false,
      fillOpacity: 0.6,
      color: 'yellow',
      fillColor: 'yellow',
      radius: markerSize*0.6
    }).bindPopup(german_ships[i].vessel.name)
  );
}

for (var i=0; i<gship_routes.length; i++){
  console.log(gship_routes[i].coordinates);
  gshipLines.push(
    L.polyline(gship_routes[i].coordinates,{
      color:'yellow',
      weight: 5,
      opacity: 0.5,
      smoothFactor: 1
    })
  )
}

for (var i =0; i < nazi_stat.length; i++){
  naziMarkers.push(
    L.circle(nazi_stat[i].coordinates, {
      stroke: false,
      fillOpacity: 0.6,
      color: 'cyan',
      fillColor: 'cyan',
      radius: markerSize
    }).bindPopup(nazi_stat[i].station.name)
  );
}

// Define variables for our base layers
  var seamap = L.tileLayer(
    "https://api.mapbox.com/styles/v1/mapbox/basic-v9/tiles/256/{z}/{x}/{y}?" +
      "access_token=pk.eyJ1Ijoib3Nha2hhcm55a2giLCJhIjoiY2poYXZpYmFkMHJnNDMwbnZkNHpqNHQ1MCJ9.UFjUchIYjdEV8Miw8kIWjg"
  );
  var darkmap = L.tileLayer(
    "https://api.mapbox.com/styles/v1/mapbox/dark-v9/tiles/256/{z}/{x}/{y}?" +
      "access_token=pk.eyJ1Ijoib3Nha2hhcm55a2giLCJhIjoiY2poYXZpYmFkMHJnNDMwbnZkNHpqNHQ1MCJ9.UFjUchIYjdEV8Miw8kIWjg"
  );

var cities = L.layerGroup(cityMarkers);
var gships = L.layerGroup(gshipMarkers);
var glines = L.layerGroup(gshipLines);
var nstat = L.layerGroup(naziMarkers);

// Create a baseMaps object
var baseMaps = {
  "Sea Map": seamap,
  "Station Map": darkmap
};

// Create an overlay object
var overlayMaps = {
  "Weather Stations": cities,
  "German Ships": gships,
  'Routes': glines,
  'Secret Nazi Stations': nstat
};

// Define a map object
var myMap = L.map("map", {
  center: [48.86, 2.35],
  zoom: 2,
  layers: [darkmap, seamap, cities, gships, glines, nstat]
});

// Pass map layers into our layer control
L.control.layers(baseMaps, overlayMaps, {
  collapsed: true
}).addTo(myMap);

